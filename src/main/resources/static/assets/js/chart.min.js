function calcLinear(C,j,i,v,s){var z=0;var u=0;var o=C.length;var D=[];C.forEach(function(c,a){var b={};b.x=j(c);b.y=i(c);b.mult=b.x*b.y;D.push(b)});var g=0;var h=0;var k=0;var l=0;D.forEach(function(a){g=g+a.mult;h=h+a.x;k=k+a.y;l=l+(a.x*a.x)});var B=g*o;var A=h*k;var w=l*o;var t=h*h;var p=(B-A)/(w-t);var r=k;var q=p*h;var A=(r-q)/o;return{ptA:{x:z,y:p*z+A},ptB:{x:v,y:p*v+A}}}function plotChart(g,h,e,d){function n(q){return(typeof k.rangeBand)!="undefined"?k(q.d)+k.rangeBand()/2:k(q.d)}function l(q){return(typeof j.rangeBand)!="undefined"?j(q.m)+j.rangeBand()/2:j(q.m)}var f={top:20,right:30,bottom:30,left:40},b=800-f.left-f.right,m=400-f.top-f.bottom;var k;if(e==="decimal"||e==="integer"){k=d3.scale.linear().domain([d3.min(g,function(q){return q.d}),d3.max(g,function(q){return q.d})]).range([0,b])}else{if(e==="dateTime"){k=d3.time.scale().domain([d3.min(g,function(q){return q.d}),d3.max(g,function(q){return q.d})]).range([0,b])}else{k=d3.scale.ordinal().domain(g.map(function(q){return q.d})).rangeRoundBands([0,b],0.1)}}var j=d3.scale.linear().domain([d3.min(g,function(q){return q.m}),d3.max(g,function(q){return q.m})]).range([m,0]);var c=d3.svg.axis().scale(k).orient("bottom");var a=d3.svg.axis().scale(j).orient("left");var i=d3.select("#chart").append("svg").attr("width",b+f.left+f.right).attr("height",m+f.top+f.bottom).append("g").attr("transform","translate("+f.left+","+f.top+")");i.append("g").attr("class","x axis").attr("transform","translate(0,"+m+")").call(c);i.append("g").attr("class","y axis").call(a);if(h==="ScatterPlotChartAppearance"){var o=calcLinear(g,n,l,b,m);i.append("line").attr("class","line").attr("x1",o.ptA.x).attr("y1",o.ptA.y).attr("x2",o.ptB.x).attr("y2",o.ptB.y);i.selectAll(".bar").data(g).enter().append("circle").attr("class","bar").attr("cx",n).attr("cy",function(q){return j(q.m)}).attr("r",5)}else{if(h==="LineChartAppearance"){var p=d3.svg.line().x(n).y(l).interpolate("cardinal");i.append("path").attr("d",p(g)).attr("class","line");i.selectAll(".bar").data(g).enter().append("circle").attr("class","bar").attr("cx",n).attr("cy",l).attr("r",5)}else{i.selectAll(".bar").data(g).enter().append("rect").attr("class","bar").attr("x",function(q){return k(q.d)}).attr("y",function(q){return j(q.m)}).attr("height",function(q){return m-j(q.m)}).attr("width",k.rangeBand())}}};