function saveGrid(){loader.saveData(containerurl,context)}function saveChangedGrid(){loader.saveChangedData(containerurl,context)}function statusFormatter(f,a,e,d,c){var b="";if(e===1){b="<img src='"+staticroot+"/css/images/tick.png'>"}else{if(e===2){b="<img src='"+staticroot+"/css/images/tag_red.png'>"}}return b}(function(b){function a(j){var r=50;var E=[];var n=[];var o="";var e=null;var u=1;var i=null;var d=null;var l=j;var w={};var B=new Slick.Event();var v=new Slick.Event();var x=new Slick.Event();var F=new Slick.Event();function C(){}function D(G){if(G.hasOwnProperty("status")){if(G.status==0){alert("Connection lost - please try again")}else{if(G.hasOwnProperty("responseText")){alert(G.status+": "+G.responseText)}else{alert("Error: "+G.status+"(sorry, don't have more information)")}}}else{alert("Connection lost - please try again")}}function t(I,H){for(var G=I;G<=H;G++){if(E[G]==undefined||E[G]==null){return false}}return true}function y(){for(var G in E){delete E[G]}E.length=0}function s(H){var G=new Date(Date.now());n.push({"@id":E[H]["@id"],"http://www.w3.org/ns/prov#invalidatedAtTime":G.toISOString()});E.splice(H,1)}function h(K,J){if(d){d.abort();for(var G=d.fromPage;G<=d.toPage;G++){E[G*r]=undefined}}if(K<0){K=0}if(E.length>0){J=Math.min(J,E.length-1)}var I=Math.floor(K/r);var H=Math.floor(J/r);while(E[I*r]!==undefined&&I<H){I++}while(E[H*r]!==undefined&&I<H){H--}if(I>H||((I==H)&&E[I*r]!==undefined)){v.notify({from:K,to:J});return}if(i!=null){clearTimeout(i)}i=setTimeout(function(){for(var L=I;L<=H;L++){E[L*r]=null}B.notify({from:K,to:J});d=b.ajax({cache:false,headers:{Accept:"application/ld+json"},datatype:"json",url:l,success:m,error:function(M){q(M,I,H)}});d.fromPage=I;d.toPage=H},50)}function q(I,H,G){D(I);v.notify({from:0,to:0})}function m(L){var S=0;var I=L["@context"];for(var V in I){if(typeof I[V]==="object"){var P=V.indexOf(":");if(P>0){var O=V.substring(0,P);var H=V.substring(P+1);var K=I[O];if(K!==""){w[K+H]=true}}}}if("graph" in L){to=S+L.graph.length;E.length=L.graph.length;for(var M=0;M<L.graph.length;M++){var J=L.graph[M];var V={};for(var U in J){if(J.hasOwnProperty(U)){var P=U.indexOf(":");var G=U;if(P>0){var O=U.substring(0,P);var H=U.substring(P+1);var K=I[O];if(K!==""){G=K+H}}else{var N=I[U];if(N!==""){G=N}}V[G]=J[U]}}for(var T in fragments){if(fragments.hasOwnProperty(T)){if(fragments[T]===T){for(var R in templateItem){if(templateItem.hasOwnProperty(R)&&V.hasOwnProperty(R)){if(templateItem[R].indexOf("{"+T+"}")>0){var Q=new RegExp("^"+templateItem[R].replace("{"+T+"}","(.+)")+"$","g");V[T]=V[R].replace(Q,"$1")}}}}}}E[S+M]=V;E[S+M].index=S+M;E[S+M]["#"]=0}}else{if("@id" in L){to=S+1;var J=L;var V={};for(var U in J){if(J.hasOwnProperty(U)&&U!=="@context"){var P=U.indexOf(":");var G=U;if(P>0){var O=U.substring(0,P);var H=U.substring(P+1);var K=I[O];if(K!==""){G=[K+H]}}V[G]=J[U]}}for(var T in fragments){if(fragments.hasOwnProperty(T)){if(fragments[T]===T){V[T]="calc"}}}E[S]=V;E[S].index=S;E[S]["#"]=0}else{if(b.isArray(L)){to=S+L.length;E.length=L.length;for(var M=0;M<L.length;M++){var J=L[M];var V={};for(var U in J){if(J.hasOwnProperty(U)){var G=U;if(G==="@type"){G="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}var R=J[U];if(b.isArray(R)){R=R[0]}if(typeof R==="object"){if(R.hasOwnProperty("@value")){V[G]=R["@value"]}if(R.hasOwnProperty("@id")){V[G]=R["@id"]}}else{V[G]=R}}}for(var T in fragments){if(fragments.hasOwnProperty(T)){if(fragments[T]===T){for(var R in templateItem){if(templateItem.hasOwnProperty(R)&&V.hasOwnProperty(R)){if(templateItem[R].indexOf("{"+T+"}")>0){var Q=new RegExp("^"+templateItem[R].replace("{"+T+"}","(.+)")+"$","g");V[T]=V[R].replace(Q,"$1")}}}}}}E[S+M]=V;E[S+M].index=S+M;E[S+M]["#"]=0}}else{to=S}}}d=null;v.notify({from:S,to:to})}function k(I,H){for(var G=I;G<=H;G++){delete E[G]}h(I,H)}function g(H,G){e=H;u=G;y()}function f(G){o=G;y()}function c(H,I,G){I["#"]=1;for(var J in G){if(G.hasOwnProperty(J)){I[J]=G[J]}}I["@id"]=UUIDjs.create().toURN();E.push(I);p(E.length-1);H.invalidateRow(E.length-1);H.updateRowCount();H.render()}function p(K){for(var J in templateItem){if(templateItem.hasOwnProperty(J)){var I=templateItem[J];for(var H in fragments){if(fragments.hasOwnProperty(H)){if(I.indexOf("{"+H+"}")>0){if(E[K].hasOwnProperty(fragments[H])){var G=E[K][fragments[H]];if(G!==""){I=I.replace("{"+H+"}",G)}else{I=""}}else{I=""}}}}}if(I===""){delete E[K][J]}else{E[K][J]=I}}}function z(I,J){var H={};for(var K in J){if(J.hasOwnProperty(K)){if(typeof J[K]==="object"){H[K]={"@type":"@id"}}else{H[K]=J[K]}}}for(var K in w){if(w.hasOwnProperty(K)){H[K]={"@type":"@id"}}}var G={"@context":H,graph:E};x.notify();b.ajax({type:"PUT",contentType:"application/ld+json",url:I,data:JSON.stringify(G),success:function(){for(var L=0;L<E.length;L++){E[L]["#"]=0}grid.invalidateAllRows();grid.render();F.notify()},error:function(L){D(L);F.notify()}})}function A(G,H){function I(R){return(R["#"]===1)}function K(R){return(R["#"]===2)}function N(){O--;if(O===0){O=-1;for(var R=0;R<E.length;R++){E[R]["#"]=0}n.splice(0,n.length);grid.invalidateAllRows();grid.render();F.notify()}}var P={};for(var Q in H){if(H.hasOwnProperty(Q)){if(typeof H[Q]==="object"){P[Q]={"@type":"@id"}}else{P[Q]=H[Q]}}}for(var Q in w){if(w.hasOwnProperty(Q)){P[Q]={"@type":"@id"}}}var J={"@context":P,graph:E.filter(I)};var M={"@context":P,graph:E.filter(K)};var L={"@context":P,graph:n};var O=0;if(L.graph.length>0){O++}if(J.graph.length>0){O++}if(M.graph.length>0){O++}if(O>0){x.notify()}if(L.graph.length>0){b.ajax({type:"DELETE",contentType:"application/ld+json",url:G,data:JSON.stringify(L),success:N,error:function(R){D(R);F.notify()}})}if(J.graph.length>0){b.ajax({type:"POST",contentType:"application/ld+json",url:G,data:JSON.stringify(J),success:N,error:function(R){D(R);F.notify()}})}if(M.graph.length>0){b.ajax({type:"PUT",contentType:"application/ld+json",url:G,data:JSON.stringify(M),success:N,error:function(R){D(R);F.notify()}})}}C();return{data:E,clear:y,isDataLoaded:t,ensureData:h,reloadData:k,setSort:g,setSearch:f,addRow:c,removeRow:s,updateRow:p,saveData:z,saveChangedData:A,onDataLoading:B,onDataLoaded:v,onDataSaving:x,onDataSaved:F}}b.extend(true,window,{Slick:{Data:{RemoteModel:a}}})})(jQuery);