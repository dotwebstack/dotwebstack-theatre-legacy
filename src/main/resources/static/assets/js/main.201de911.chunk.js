(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{183:function(t,e,n){t.exports=n(403)},188:function(t,e,n){},190:function(t,e,n){},230:function(t,e){},403:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(24),i=n.n(o),s=(n(188),n(25)),c=n(26),u=n(29),l=n(27),h=n(30),p=(n(190),n(177)),d=n.n(p),f=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,t))).filterBegrippen=function(t){return n.props.data.filter(function(e){return e.label.toLowerCase().includes(t.toLowerCase())})},n.loadOptions=function(t,e){setTimeout(function(){e(n.filterBegrippen(t))},1e3)},n.state={inputValue:""},n}return Object(h.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{placeholder:"Zoek...",isLoading:this.props.isLoading,cacheOptions:!0,isClearable:!0,loadOptions:this.loadOptions,defaultOptions:!0,onInputChange:this.props.handleInputChange,onChange:this.props.handleSelect}))}}]),e}(a.Component),m=n(72),g=n(4),w=n(73),b=n.n(w),v=n(179),j=n.n(v),O=n(28),y=n(180),S=n(181),C=n.n(S),L=window.dwsHostname,E=window.dwsEndpoint,x=window.dwsConfig,k=window.dwsSearchEndpoint,D=window.dwsSearchResult,A=function(t,e,n){return t.map(function(t){return{label:t[e],value:t[n]}})},N=function(t){return t.sort(function(t,e){return t.label>e.label?1:e.label>t.label?-1:0})},I=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,t))).fetchOptions=function(t){fetch("".concat(n.state.searchEndpoint,"?term=").concat(t),{method:"get",headers:{Accept:"application/json"}}).then(function(t){return t.json()}).then(function(t){return A(t,n.state.optionLabel,n.state.optionValue)}).then(function(t){return N(t)}).then(function(t){return n.setState(function(e){return{options:t,isLoading:!1}}),t}).catch(function(t){return console.error(t)})},n.handleInputChange=function(t){return t.length>2&&(n.setState({isLoading:!0}),n.fetchOptions(t)),t},n.handleSelect=function(t){n.setState(function(e){return{options:t}}),n.props.onChange(t)},n.state=Object(m.a)({},t.formData,{options:[],title:t.schema.title?t.schema.title:"",placeholder:t.uiSchema["ui:options"]&&t.uiSchema["ui:options"].placeholder?t.uiSchema["ui:options"].placeholder:"Voeg toe...",optionLabel:t.uiSchema["ui:options"]&&t.uiSchema["ui:options"].optionLabel?t.uiSchema["ui:options"].optionLabel:"label",optionValue:t.uiSchema["ui:options"]&&t.uiSchema["ui:options"].optionValue?t.uiSchema["ui:options"].optionValue:"value",searchEndpoint:t.uiSchema["ui:options"]&&t.uiSchema["ui:options"].searchEndpoint?t.uiSchema["ui:options"].searchEndpoint:"http://".concat(L).concat(k),isLoading:!0}),n.fetchOptions=Object(O.debounce)(n.fetchOptions,250),n}return Object(h.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.setState({isLoading:!1,options:this.props.schema.default?this.props.schema.default:[],defaultValue:this.props.formData})}},{key:"render",value:function(){return r.a.createElement(M,{title:this.state.title,placeholder:this.state.placeholder,options:this.state.options,defaultValue:this.props.formData,isLoading:this.state.isLoading,handleSelect:this.handleSelect,handleInputChange:this.handleInputChange})}}]),e}(a.Component),M=function(t){return r.a.createElement("fieldset",null,r.a.createElement("label",null,t.title),r.a.createElement(y.a,{name:t.name,placeholder:t.placeholder,isLoading:t.isLoading,closeMenuOnSelect:!1,components:C()(),defaultValue:t.defaultValue,isMulti:!0,options:t.options,onInputChange:t.handleInputChange,onChange:t.handleSelect,isClearable:!1,isDisabled:t.isDisabled}))},B=function(t){var e={type:"object",required:t.formRequiredFields,properties:t.formTypes},n={searchField:I},a=t.formUISchema;return t.compacted&&r.a.createElement(j.a,Object.assign({},t,{className:"form form-wide",formData:t.formData,schema:e,uiSchema:a,fields:n,onChange:t.handleFormDataChange,onSubmit:t.handleSubmit}))},V=function(t){return t&&t.length>0?t.replace("standaard.aquo.nl",L).replace("/id/","/doc/"):t},F=function(t){return t.map(function(t){var e=t["http://www.w3.org/ns/shacl#name"][0]["@value"],n=Object(g.a)({},e,{"@id":t["http://www.w3.org/ns/shacl#path"][0]["@id"]});if(t["http://www.w3.org/ns/shacl#datatype"]){var a=t["http://www.w3.org/ns/shacl#datatype"][0]["@id"];if(a.toLowerCase().endsWith("date")||a.toLowerCase().endsWith("datetime")){var r={"@type":t["http://www.w3.org/ns/shacl#datatype"][0]["@id"]};Object.assign(n[e],r)}}else{var o=t["http://www.w3.org/ns/shacl#maxCount"];if(o)"1"!==o[0]["@value"]&&(Object.assign(n[e],{"@type":"@id"}),Object.assign(n[e],{"@container":"@set"}));else void 0===t["http://www.w3.org/ns/shacl#maxLength"]&&(Object.assign(n[e],{"@type":"@id"}),Object.assign(n[e],{"@container":"@set"}))}return n}).reduce(function(t,e){return Object.assign(e,t)},{})},W=function(t,e,n){return t.map(function(t){var a=t["http://www.w3.org/ns/shacl#name"][0]["@value"],r=e[a],o=n[a];return Object(O.isEmpty)(o)?t["http://www.w3.org/ns/shacl#class"]&&t["http://dotwebstack.org/def/elmo#endpoint"]?T(a,r,o,"label","value"):t["http://www.w3.org/ns/shacl#datatype"]&&t["http://www.w3.org/ns/shacl#datatype"][0]["@id"].endsWith("langString")?U(a,r,o):R(a,r,o):"string"===typeof o?R(a,r,o):Array.isArray(o)?"string"===typeof o[0]?U(a,r,o):"object"===typeof o[0]?o[0]["@value"]?T(a,r,o,"@language","@value"):o[0].label?T(a,r,o,"label","value"):R(a,r,o):R(a,r,o):o["@type"]?J(a,r,o,"@type","@value"):R(a,r,o)}).reduce(function(t,e){return Object.assign(e,t)},{})},q=function(t,e){var n;return n={},Object(g.a)(n,t,{type:"string"}),Object(g.a)(n,e,{type:"string"}),n},T=function(t,e,n,a,r){return Object(g.a)({},t,{type:"array",items:{type:"object",properties:q(a,r)},title:e,default:n})},R=function(t,e,n){return Object(g.a)({},t,{type:"string",title:e,default:n})},J=function(t,e,n,a,r){return Object(g.a)({},t,{type:"object",properties:q(a,r),title:e,default:n})},U=function(t,e,n){return Object(g.a)({},t,{type:"array",items:{type:"string"},title:e,default:n})},H=function(t,e,n){return t.map(function(t){var n=t["http://www.w3.org/ns/shacl#name"][0]["@value"],a=e[n],r=Number.parseInt(t["http://www.w3.org/ns/shacl#order"][0]["@value"]),o=Object(g.a)({},n,{}),i=t["http://www.w3.org/ns/shacl#maxLength"];i&&(Number.parseInt(i[0]["@value"])>59&&Object.assign(o[n],$()));if(t["http://www.w3.org/ns/shacl#datatype"]){var s=t["http://www.w3.org/ns/shacl#datatype"][0]["@id"];s.toLowerCase().endsWith("date")?Object.assign(o[n],X()):s.toLowerCase().endsWith("datetime")&&Object.assign(o[n],Z())}if(t["http://www.w3.org/ns/shacl#class"]&&t["http://dotwebstack.org/def/elmo#endpoint"]){var c=t["http://dotwebstack.org/def/elmo#endpoint"][0]["@value"];Object.assign(o[n],_(a,c))}var u=t["http://www.w3.org/ns/shacl#maxCount"];return u?"1"===u[0]["@value"]?Object.assign(o[n],P(!1)):Object.assign(o[n],P(!0)):t["http://www.w3.org/ns/shacl#class"]&&t["http://dotwebstack.org/def/elmo#endpoint"]||Object.assign(o[n],P(!0)),Object.assign(o[n],{ordering:r}),o}).reduce(function(t,e){return Object.assign(e,t)},{})},P=function(t){return{"ui:options":{addable:t,removable:!0,orderable:!1}}},X=function(){return{"ui:widget":"date"}},Z=function(){return{"ui:widget":"date-time"}},$=function(){return{"ui:widget":"textarea"}},_=function(t,e){return{"ui:field":"searchField","ui:options":{placeholder:"Voeg een ".concat(t," toe..."),addable:!1,removable:!0,orderable:!1,optionLabel:"label",optionValue:"uri",searchEndpoint:"http://".concat(L).concat(e)}}},z=function(t){return t.map(function(t){var e=!1,n=t["http://www.w3.org/ns/shacl#name"][0]["@value"],a=t["http://www.w3.org/ns/shacl#minCount"];a&&(Number.parseInt(a[0]["@value"])>0&&(e=!0));return{field:n,required:e}}).filter(function(t){return!0===t.required}).map(function(t){return t.field})},G=function(t){return 0===t.indexOf("Begrip: ")?t.substr("Begrip: ".length,t.length):t},K=function(t){return t.map(function(t){var e=t["http://www.w3.org/2000/01/rdf-schema#label"];return t["http://www.w3.org/2000/01/rdf-schema#label"][0]["@value"]&&(e=t["http://www.w3.org/2000/01/rdf-schema#label"][0]["@value"]),Object(g.a)({},t["http://www.w3.org/ns/shacl#name"][0]["@value"],e)}).reduce(function(t,e){return Object.assign(e,t)},{})},Q=function(t){return t.map(function(t){return Object(g.a)({},t["http://www.w3.org/ns/shacl#name"][0]["@value"],void 0)}).reduce(function(t,e){return Object.assign(e,t)},{})},Y=function(t,e){return Object.keys(t).filter(function(t){return!1===t.startsWith("@")}).filter(function(e){return Array.isArray(t[e])}).filter(function(e){return t[e].length>0}).filter(function(e){return"string"===typeof t[e][0]}).map(function(n){return t[n]=t[n].flatMap(function(t){return function(t,e){return t.filter(function(t){return t["@id"]===e}).map(function(t){return{label:t.label,value:e}})}(e,t)})})},tt=function(t){return Object.keys(t).filter(function(t){return!1===t.startsWith("@")}).filter(function(e){return Array.isArray(t[e])}).filter(function(e){return t[e].length>0}).filter(function(e){return"object"===typeof t[e][0]}).map(function(e){return t[e]=t[e].map(function(t){return t.value})})},et=function(t){return Object.keys(t).filter(function(t){return!1===t.startsWith("@")||!1===t.startsWith("http://")}).reduce(function(e,n){return Object(m.a)({},e,Object(g.a)({},n,t[n]))},{})},nt=function(t,e,n){if(t[e]&&t[e][n]){var a=t[e]["@value"];delete t[e][n],delete t[e]["@value"],t[e]=a}},at=function(t,e,n,a){if(t[e]){var r,o=t[e];if(n&&n.length>0)Object.assign(t[e],(r={},Object(g.a)(r,n,a),Object(g.a)(r,"@value",o),r));else Object.assign(t[e],{"@value":o})}},rt=function(t,e,n){if(t[e]){var a=t[e];Array.isArray(a)&&(t[e]=a.map(function(t){if(t[n]){var e=t[n],a=t["@value"];return"xx"===e.toLowerCase()?"".concat(a):"".concat(a," [").concat(e,"]")}var r=t["@value"];return"".concat(r)}))}},ot=function(t,e,n){if(t[e]){var a=t[e];Array.isArray(a)&&(t[e]=a.reduce(function(t,e){var a,r;return-1!==e.indexOf("[")&&-1!==e.indexOf("]")?t.concat({value:(a={},Object(g.a)(a,n,function(t){return t.substring(t.indexOf("[")+1,t.indexOf("]"))}(e)),Object(g.a)(a,"@value",function(t){return t.substring(0,t.indexOf("[")-1)}(e)),a)}):t.concat({value:(r={},Object(g.a)(r,n,"xx"),Object(g.a)(r,"@value",e),r)})},[]))}},it=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,t))).getContext=function(t){return fetch(t,{method:"get",headers:{Accept:"application/ld+json"}}).then(function(t){return t.json()}).then(function(t){var e=F(t);return n.setState({context:e}),t}).then(function(t){var e=K(t);return n.setState({labels:e}),t}).then(function(t){var e=Q(t);return n.setState({formData:e}),t}).then(function(t){var e=z(t);return n.setState({formRequiredFields:e}),t}).then(function(t){n.setState({shacl:t})}).catch(console.error)},n.compactBegrip=function(t,e){return new Promise(function(a){b.a.compact(e,n.state.context,function(e,n){e&&console.error(e);var r=Array.isArray(n["@graph"])?n["@graph"].filter(function(e){return e["@id"]===t})[0]:n,o={label:t,uri:t};r.label&&(o={label:G(r.label),uri:t}),a(o)})})},n.changeFormData=function(t){n.setState({formData:t})},n.submitFormData=function(t){n.setState({formData:t.formData});var e=n.state.compacted;Object.keys(t.formData).map(function(n){return e[n]=t.formData[n]}),at(e,"id","@type","http://www.w3.org/2001/XMLSchema#integer"),ot(e,"altLabel","@language"),tt(e);var a={"@context":n.state.context,"@graph":[].concat(e)};n.expandJson(a).then(function(t){return n.saveBegrip(t)})},n.saveBegrip=function(t){var e="put";return n.props.isNew&&(e="post",Object.assign(t[0],{"@id":"http://new-resource","@type":["http://www.w3.org/2004/02/skos/core#Concept"]})),fetch("http://".concat(L).concat(E),{method:e,body:JSON.stringify(t),headers:{"Content-Type":"application/ld+json"}}).then(function(t){return 200===t.status?n.props.showMessage("success"):n.props.showMessage("danger")}).then(function(){return n.setState({ld:t})}).catch(function(t){console.error(t),n.props.showMessage("danger")})},n.getBegripLabel=function(t){return fetch("".concat(V(t),"?format=json"),{method:"get",headers:{Accept:"application/ld+json"}}).then(function(t){return t.json()}).then(function(e){return n.compactBegrip(t,e)}).catch(console.error)},n.compact=function(t){return b.a.compact(t,n.state.context,function(e,a){e&&console.error(e);var r=Array.isArray(a["@graph"])?a["@graph"].filter(function(t){return t["@id"]===n.props.selected.value})[0]:a,o=Array.isArray(a["@graph"])?a["@graph"].filter(function(t){return t["@id"]!==n.props.selected.value}):[];Y(r,o),Object.keys(r).filter(function(t){return Object(O.isEmpty)(r[t])}).map(function(t){return r[t]=void 0}),nt(r,"id","@type"),rt(r,"altLabel","@language");var i=W(n.state.shacl,n.state.labels,et(r)),s=H(n.state.shacl,n.state.labels,et(r)),c={"ui:order":Object.keys(s).map(function(t){return{name:t,ordering:s[t].ordering}}).sort(function(t,e){return t.ordering>e.ordering?1:e.ordering>t.ordering?-1:0}).map(function(t){return t.name})};Object.assign(s,c),n.setState({ld:t,compacted:r,savedValues:o,formTypes:i,formUISchema:s,formData:et(r)})})},n.expandJson=function(t){return new Promise(function(e){return b.a.expand(t,function(t,n){return e(n)})})},n.fetchMetadata=function(){n.props.isNew?n.compact({"@id":"http://new-resource"}):fetch("".concat(V(n.props.selected.value),"?format=json"),{method:"get",headers:{Accept:"application/ld+json"}}).then(function(t){return t.json()}).then(function(t){return n.compact(t)}).then(function(){return n.setState({isLoading:!1})}).catch(console.error)},n.state={ld:{},compacted:{},context:{},labels:{},savedValues:[],formData:{},formTypes:{},formRequiredFields:[],formUISchema:{},shacl:{},isLoading:!0},n.fetchMetadata=Object(O.debounce)(n.fetchMetadata,250),n}return Object(h.a)(e,t),Object(c.a)(e,[{key:"componentWillMount",value:function(){this.getContext("http://".concat(L).concat(x))}},{key:"componentDidMount",value:function(){this.fetchMetadata()}},{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"row"},this.props.isLoading?r.a.createElement("div",null,"Loading"):r.a.createElement("div",{className:"col-md-12 order-md-1 text-left"},r.a.createElement(B,Object.assign({},this.props,{compacted:this.state.compacted,ld:this.state.ld,labels:this.state.labels,formData:this.state.formData,formTypes:this.state.formTypes,formRequiredField:this.state.formRequiredFields,formUISchema:this.state.formUISchema,handleSubmit:this.submitFormData,handleFormDataChange:function(e){return t.changeFormData(e.formData)}}))))}}]),e}(a.Component),st=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,t))).fetchBegrippen=function(t){fetch("http://".concat(L).concat(k,"?term=").concat(t),{method:"get",headers:{Accept:"application/json"}}).then(function(t){return t.json()}).then(function(t){return t.map(function(t){return{value:t.uri,label:t.label}})}).then(function(t){return t.sort(function(t,e){return t.label>e.label?1:e.label>t.label?-1:0})}).then(function(t){return n.setState({isNew:!1,data:t,isLoading:!1})}).catch(function(t){return console.error(t)})},n.handleInputChange=function(t){var e=t;return e.length>2&&n.fetchBegrippen(e),n.setState({inputValue:e}),e},n.handleSelect=function(t){n.setState({selected:t})},n.showMessage=function(t){"success"===t?n.setState({status:t,message:"Het opslaan is gelukt."}):n.setState({status:t,message:"Er is iets mis gegaan bij het opslaan."})},n.handleClose=function(){n.setState({status:null,message:null})},n.state={isLoading:!0,data:[],selected:"",isNew:!0},n.fetchBegrippen=Object(O.debounce)(n.fetchBegrippen,250),n}return Object(h.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){if(D&&D.length>0){var t={label:D,value:D},e=[t];this.setState({selected:t,data:e,isNew:!1})}else if(k&&k.length>0)this.setState({isLoading:!1,isNew:!1});else{var n={label:"new-resource",value:"http://new-resource"},a=[n];this.setState({selected:n,data:a,isLoading:!1,isNew:!0})}}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"py-5 text-center"},r.a.createElement("div",{className:"mb-3"},this.state.selected&&r.a.createElement("pre",null,r.a.createElement("a",{href:V(this.state.selected.value),target:"_blank",rel:"noopener noreferrer"},V(this.state.selected.value))),k&&k.length>0&&r.a.createElement(f,{data:this.state.data,isLoading:this.state.isLoading,handleSelect:this.handleSelect,handleInputChange:this.handleInputChange})),this.state.selected&&r.a.createElement(it,{selected:this.state.selected,isNew:this.state.isNew,showMessage:this.showMessage}),this.state.message&&r.a.createElement(ct,{text:this.state.message,status:this.state.status,handleClose:this.handleClose})))}}]),e}(a.Component),ct=function(t){function e(t,n){var a;return Object(s.a)(this,e),(a=Object(u.a)(this,Object(l.a)(e).call(this,t,n))).state={isActive:!0},a}return Object(h.a)(e,t),Object(c.a)(e,[{key:"hideAlert",value:function(){this.setState({isActive:!1}),this.props.handleClose()}},{key:"render",value:function(){var t=this,e="alert alert-".concat(this.props.status," alert-dismissible");return r.a.createElement("div",null,this.state.isActive&&r.a.createElement("div",{className:e,role:"alert"},r.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:function(){return t.hideAlert()}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7")),this.props.text))}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(401);i.a.render(r.a.createElement(st,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[183,2,1]]]);
//# sourceMappingURL=main.201de911.chunk.js.map